(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};this.Simpsum=function(){function b(a,b){null==b&&(b="simpsum"),this.dataSourceLink=a,this.regex=new RegExp("\\{{2}\\s{1,}("+b+")(\\([0-9]{1,}\\))?\\s{1,}\\}{2}"),this.allowedNodes=["H1","H2","H3","H4","H5","H6","P","LI"],this.headingNodes=this.allowedNodes.slice(0,6),this.nodesToChange=[],this.findAllowedNodes(document.body),this.getContent()}return b.prototype.findAllowedNodes=function(b){var c,d,e,f,g,h,i,j;if(console.log(this.regex.test(b.innerHTML)),console.log(this.regex),g=b.nodeName,a.call(this.allowedNodes,g)>=0&&this.regex.test(b.innerHTML))return this.nodesToChange.push({element:b,characterLimit:0}),/\([0-9]{1,}\)/.test(b.innerHTML)&&(e=b.innerHTML.match(/\((.*?)\)/),this.nodesToChange[this.nodesToChange.length-1].characterLimit=parseInt(e[1])),h=b.nodeName,f=a.call(this.headingNodes,h)>=0?"heading":"paragraph",this.nodesToChange[this.nodesToChange.length-1].type=f;i=b.childNodes,j=[];for(d in i)c=i[d],j.push(this.findAllowedNodes(c));return j},b.prototype.getContent=function(){return this.loadDummyText(this.setContent)},b.prototype.loadDummyText=function(b){var c,d;return d=new XMLHttpRequest,c=this.nodesToChange,d.addEventListener("readystatechange",function(){var e,f,g;return 4===d.readyState?(f=[200,304],g=d.status,a.call(f,g)>=0?(e=JSON.parse(d.responseText),b(c,e)):console.log("Error loading data...")):void 0}),d.open("GET",this.dataSourceLink,!1),d.send()},b.prototype.setContent=function(a,b){var c,d,e,f,g,h;for(h=[],f=0,g=a.length;g>f;f++){switch(e=a[f],e.type){case"heading":c=b.headings;break;case"paragraph":c=b.paragraphs}d=c[Math.floor(Math.random()*c.length)],h.push(e.element.innerHTML=0===e.characterLimit?d:d.substring(0,e.characterLimit))}return h},b}()}).call(this);